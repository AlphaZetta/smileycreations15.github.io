!async function(){var notOk=!0;window.Notification&&"granted"===window.Notification.permission&&(notOk=!1);var savedPath=window.location.pathname;function postSecure(e){navigator.serviceWorker&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage(e)}eval(await(await fetch("/files/javascript/lib.min.js")).text());var deferredPrompt={prompt:()=>{}},ui={remove:()=>{}},a1=!1;function installPWA(){postSecure({action:"pwaStatus",status:"pwa-install-prompt"}),document.body.removeChild(document.getElementById("installPrompt")),(ui=smileycreations15.showLoaderOverlay("ui-install","Please wait...")).show(),deferredPrompt.prompt(),deferredPrompt.userChoice.then(e=>{ui.remove(),"accepted"===e.outcome?((ui=smileycreations15.showLoaderOverlay("ui-install","Installation in progress...<br><span style='font-size:20px'>Please do not close the tab.</span>")).show(),window.addEventListener("appinstalled",e=>{postSecure({action:"pwaStatus",status:"pwa-install-success"}),ui.remove(),smileycreations15.dialogBox("top-left","success","App installed successfully")}),postSecure({action:"pwaStatus",status:"pwa-install-accept"}),window.matchMedia("(display-mode: standalone)").matches?(postSecure({action:"pwaStatus",status:"pwa-after-install-launch"}),postSecure({action:"pwaStatus",status:"pwa-launch"}),smileycreations15.database.set("pwaNotify",!0),window.location.pathname="/pwa"):window.matchMedia("(display-mode: standalone)").addListener(function(e){e.matches&&!a1&&(postSecure({action:"pwaStatus",status:"pwa-after-install-launch"}),postSecure({action:"pwaStatus",status:"pwa-launch"}),smileycreations15.database.set("pwaNotify",!0),window.location.pathname="/pwa",a1=!0)})):postSecure({action:"pwaStatus",status:"pwa-install-reject"}),deferredPrompt=null}),postSecure({action:"cachePwa"})}window.matchMedia("(display-mode: standalone)").matches&&("/pwa"===window.location.pathname?postSecure({action:"pwaStatus",status:"pwa-launch"}):postSecure({action:"pwaStatus",status:"pwa-url-launch",url:window.location.pathname})),window.addEventListener("beforeinstallprompt",e=>{postSecure({action:"pwaStatus",status:"pwa-install-event-fired"}),e.preventDefault(),deferredPrompt=e;let t=document.createElement("a");t.onclick=installPWA,t.id="installPrompt",t.innerHTML="Install app";["/pwa","/pwa.html"].includes(window.location.pathname)||document.body.appendChild(t)});var getQueryString=function(e,t=window.location.href){var a=t||window.location.href,o=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(a);return o?o[1]:null};"/pwa"!==window.location.pathname&&"/pwa.html"!==window.location.pathname||(document.getElementById("myProfile").href="javascript:void(0)",document.getElementById("myProfile").addEventListener("click",function(){openPwaUrl("https://github.com/smileycreations15")})),async function(){"/pwa"===window.location.pathname&&!0===await smileycreations15.database.get("pwaNotify")&&(smileycreations15.createSoundElement([{type:"audio/mp3",url:"/files/sounds/notify-notice.mp3"}]).play(),smileycreations15.database.set("pwaNotify",!1),smileycreations15.dialogBox("top-left","success","App installed successfully"))}(),!0===await smileycreations15.database.get("setting-backgronud-music")&&smileycreations15.createSoundElement([{url:"/files/sounds/theme.ogg",type:"audio/ogg"}]).play().catch(()=>{}),window.modals={},setInterval(()=>{document.querySelector("#adblock_blacklist_preview_css")&&(document.querySelector(".adblock-blacklist-dialog").remove(),document.querySelector("#adblock_blacklist_preview_css").remove(),document.querySelector(".adblock-highlight-node").remove(),modals.adblock=smileycreations15.modal("<h2>AdBlock detected</h2><p>We detected that you are using AdBlock. Please do not use AdBlock on this site.</p><button onclick='modals.adblock.element.remove()'>Ok</button>"))},500),setInterval(()=>{!window.Notification||"granted"!==window.Notification.permission&&"denied"!==window.Notification.permission||null===document.getElementById("subscribeToNotifications")||document.getElementById("subscribeToNotifications").remove()},100),document.getElementById("subscribeToNotifications").addEventListener("click",function(e){e.preventDefault(),Notification.requestPermission()}),!window.Notification||"granted"!==window.Notification.permission&&"denied"!==window.Notification.permission||null===document.getElementById("subscribeToNotifications")||document.getElementById("subscribeToNotifications").remove(),window.Notification||document.getElementById("subscribeToNotifications").remove(),"/"===location.pathname&&postSecure({action:"notify"}),postSecure({action:"notifyNoInterval"}),null!==document.getElementById("overlay")&&document.getElementById("overlay").remove()}();
